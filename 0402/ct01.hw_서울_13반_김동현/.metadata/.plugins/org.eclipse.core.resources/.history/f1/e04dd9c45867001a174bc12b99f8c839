package algo.hw0316;

import java.util.Scanner;

//0316 방송코드
public class SWEA_1868_D4_파핑파핑지회찾기 {

	static int N;
	static char[][] map;
	static boolean[][] visit;
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		Scanner sc=new Scanner(System.in);
		int T=sc.nextInt();
		
		for (int t = 1; t <= T; T++) {
			N=sc.nextInt();
			map=new char[N][N];
			visit= new boolean[N][N];
			
			for (int i = 0; i < N; i++) {
				String str= sc.next();
				map[i]=str.toCharArray();
			}
			
			int ans=0;
			for (int i = 0; i < N; i++) {
				for (int j = 0; j < N; j++) {
					if(map[i][j]!='.') continue;
					if(count(i,j)==0) {
						ans++;
						dfs(i,j);
						
					}
					
				}
			}
			
			for (int i = 0; i < N; i++) {
				for (int j = 0; j < N; j++) {
					if(map[i][j]=='.') ans++;
				}
			}
			System.out.println("#"+t+" "+ans);
			
		}
	}
	private static void dfs(int i, int j) {

		visit[i][j]=true;
		int mine=count(i,j);
		map[i][j]=(char)(mine+'0');
		if(map[i][j]!='0') return;
		
		for (int d = 0; d < dirs.length; d++) {
			int ni=i+dirs[d][0];
			int nj=j+dirs[d][1];
			if(0<=ni && 0<= nj && ni<N && nj<N && map[ni][nj]=='.' && !visit[ni][nj]) {
				dfs(ni,nj);
			}
			
		}
		
	}
	static int[][] dirs = { { 1, 0 }, { -1, 0 }, { 0, 1 }, { 0, -1 }, { 1, 1 }, { 1, -1 }, { -1, -1 }, { -1, 1 } };
	private static int count(int i, int j) {
		int mine=0;

		for (int d = 0; d < dirs.length; d++) {
			int ni=i+dirs[d][0];
			int nj=j+dirs[d][1];
			if(0<=ni && 0<= nj && ni<N && nj<N && map[ni][nj]=='*') {
				mine++;
			}
			
		}
		return mine;
	}

}
